{{ header }}
{% if chkIsPartner %}
<!-- BREADCRUMB
  ================================================== -->
<div class="breadcrumb">
      <div class="container">
        <div class="clearfix">
          <ul>
            {% for breadcrumb in breadcrumbs %}
            <li><a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a></li>
            {% endfor %}
          </ul>
        </div>
      </div>
</div>

<!-- MAIN CONTENT
  ================================================== -->
<div class="main-content full-width inner-page">
<div class="container">
  {% if error_warning %}
    <div class="alert alert-danger"><i class="fa fa-exclamation-circle"></i>{{ error_warning}}</div>
  {% endif %}
  {% if success %}
    <div class="alert alert-success"><i class="fa fa-check-circle"> </i> {{ success}}</div>
  {% endif %}
  {% if attention %}
    <div class="alert alert-info">{{ attention}}</div>
  {% endif %}

  <div class="row">{{ column_left }}
    {% if column_left and column_right %}
    {% set class = 'col-sm-6' %}
    {% elseif column_left or column_right %}
    {% set class = 'col-sm-9' %}
    {% else %}
    {% set class = 'col-sm-12' %}
    {% endif %}

  <div id="content" class="{{ class}}">{{ content_top}}
    <h1>{{ heading_title}}</h1>
      <div class="buttons clearfix">
      <div class="pull-right">
        <button type="submit" form="form-shipping" data-toggle="tooltip" title="{{ button_next}}" class="button"><i class="fa fa-share"></i></button>
        <a onclick="$('#form-delete').submit();" data-toggle="tooltip" class="button btn-danger"  title="{{ button_delete}}"><i class="fa fa-trash-o"></i></a>

        </div>
        <div class="pull-left">
        <a href="{{ back}}" data-toggle="tooltip" title="{{ button_back}}" class="button btn-default"><i class="fa fa-reply"></i></a>
      </div>
    </div>

    <legend><i class="fa fa-list"></i> {{ text_mpshipping}}</legend>
      {% if isMember %}
        <div class="alert alert-info"><i class="fa fa-exclamation-circle"></i> {{ entry_info}}
          <button type="button" class="close" data-dismiss="alert">&times;</button>
        </div>

        <form action="{{ action}}" method="post" enctype="multipart/form-data" id="form-shipping" class="form-horizontal">
          <div class="form-group">
            <label class="col-sm-3 control-label" for="input-status">{{ entry_status }}</label>
            <div class="col-sm-9">
              <select name="status" id="input-status" class="form-control">
                {% if status is defined and status %}
                <option value="1" selected="selected">{{ text_enabled }}</option>
                <option value="0">{{ text_disabled }}</option>
                {% else %}
                <option value="1">{{ text_enabled }}</option>
                <option value="0" selected="selected">{{ text_disabled }}</option>
                {% endif %}
              </select>
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-3 control-label" for="input-flatrate"><span data-toggle="tooltip" title="{{ add_flatrate}}">{{ add_flatrate}}</span></label>
            <div class="col-sm-9">
              <div class="input-group">
              <input type="text" name="shipping_add_flatrate" value="{% if shipping_add_flatrate_amount is defined  %}{{ shipping_add_flatrate_amount }}{%endif %}" placeholder="{{ add_flatrate}}" id="input-flatrate" class="form-control" />
              <span class="input-group-addon">{{ shipping_add_flatrate}}</span>
              </div>
            </div>
          </div>

          <div class="form-group required">
            <label class="col-sm-3 control-label"><span data-toggle="tooltip" title="{{ entry_csv_info}}">{{ entry_csv}}</span></label>
            <div class="col-sm-9">
              <div class="input-group">
                <span class="input-group-btn">
                  <button type="button" class="btn btn-primary" onclick="$('input[name=\'up_file\']').trigger('click');"><i class="fa fa-upload"></i> {{ button_upload}}</button>
                </span>
                <input type="text" id="input-csv-name" class="form-control" disabled/>

              </div>
              <input type="file" name="up_file" class="form-control" style="display:none;">
              <div class="hide csv-warning">
                {{ entry_error_csv}}
              </div>
            </div>
          </div>

          <div class="form-group required">
            <label class="col-sm-3 control-label"><span data-toggle="tooltip" title="{{ entry_separator_info}}">{{ entry_separator}}</span></label>
            <div class="col-sm-9">
              <div class="input-group">
                <span class="input-group-btn">
                  <button type="button" class="btn btn-primary separator"><i class="fa fa-keyboard-o"></i> {{ entry_sep_manually}}</button>
                </span>
                <div>
                  <select name="separator" id="separator" class="form-control">
                    <option value=";">Semicolon ; </option>
                    <option value=" ">Tab</option>
                    <option value=",">Comma ,</option>
                    <option value=":">Colon : </option>
                    <option value="|">Vertical bar</option>
                  </select>
                </div>
              </div>
            </div>
          </div>

          </form>

          <div class="well">
            <div class="row">
              <div class="col-sm-4">
                <div class="form-group">
                  <label class="control-label" for="input-country">{{ shipping_country}}</label>
                  <input type="text" name="filter_country" value="{{ filter_country}}" placeholder="{{ filter_country}}" id="input-country" class="form-control" />
                </div>
                <div class="form-group">
                  <label class="control-label" for="input-price">{{ price}}</label>
                  <input type="text" name="filter_price" value="{{ filter_price}}" placeholder="{{ filter_price}}" id="input-price" class="form-control" />
                </div>
              </div>

               <div class="col-sm-4">
                <div class="form-group">
                  <label class="control-label" for="input-zipto">{{ zip_to}}</label>
                  <input type="text" name="filter_zip_to" value="{{ filter_zip_to}}" placeholder="{{ filter_zip_to}}" id="input-zipto" class="form-control" />
                </div>
                <div class="form-group">
                  <label class="control-label" for="input-weightto">{{ weight_to}}</label>
                  <input type="text" name="filter_weight_to" value="{{ filter_weight_to}}" placeholder="{{ filter_weight_to}}" id="input-weightto" class="form-control" />
                </div>
              </div>

              <div class="col-sm-4">
                <div class="form-group">
                  <label class="control-label" for="input-zipfrom">{{ zip_from}}</label>
                  <input type="text" name="filter_zip_from" value="{{ filter_zip_from}}" placeholder="{{ filter_zip_from}}" id="input-zipfrom" class="form-control" />
                </div>
                <div class="form-group">
                  <label class="control-label" for="input-weightfrom">{{ weight_from}}</label>
                  <input type="text" name="filter_weight_from" value="{{ filter_weight_from}}" placeholder="{{ filter_weight_from}}" id="input-weightfrom" class="form-control" />
                </div>
              </div>
              <a onclick="filter();"  class="btn btn-primary pull-right" data-toggle="tooltip" title="{{ button_filtering}}">{{ button_filtering}}</a>
            </div>
          </div>

          <form action="{{ delete}}" method="post" enctype="multipart/form-data" id="form-delete">
            <div class="table-responsive">
              <table class="table table-bordered table-hover">
                <thead>
                    <tr>
                    <td width="1" class="text-center"><input type="checkbox" onclick="$('input[name*=\'selected\']').prop('checked', this.checked);" /></td>
                      <td class="text-left">
                        {% if sort == 'cs.country_code' %}
                        <a href="{{ sort_country_code}}" class="{{ order|lower }}">{{ shipping_country}}</a>
                        {% else %}
                        <a href="{{ sort_country_code}}">{{ shipping_country}}</a>
                        {% endif %}
                      </td>
                      <td class="text-left">
                        {% if sort == 'cs.zip_from' %}
                        <a href="{{ sort_zip_from}}" class="{{ order|lower }}">{{ zip_from}}</a>
                        {% else %}
                        <a href="{{ sort_zip_from}}">{{ zip_from}}</a>
                        {% endif %}
                      </td>
                      <td class="text-left">
                        {% if sort == 'cs.zip_to' %}
                        <a href="{{ sort_zip_to}}" class="{{ order|lower }}">{{ zip_to}}</a>
                        {% else %}
                        <a href="{{ sort_zip_to}}">{{ zip_to}}</a>
                        {% endif %}
                      </td>
                      <td class="text-left">
                        {% if sort == 'cs.price' %}
                        <a href="{{ sort_price}}" class="{{ order|lower }}">{{ price}}</a>
                        {% else %}
                        <a href="{{ sort_price}}">{{ price}}</a>
                        {% endif %}
                      </td>
                      <td class="text-left">
                        {% if sort == 'cs.weight_from' %}
                        <a href="{{ sort_weight_from}}" class="{{ order|lower }}">{{ weight_from}}</a>
                        {% else %}
                        <a href="{{ sort_weight_from}}">{{ weight_from}}</a>
                        {% endif %}
                      </td>
                      <td class="text-left">
                        {% if sort == 'cs.weight_to' %}
                        <a href="{{ sort_weight_to}}" class="{{ order|lower }}">{{ weight_to}}</a>
                        {% else %}
                        <a href="{{ sort_weight_to}}">{{ weight_to}}</a>
                        {% endif %}
                      </td>
                      <td class="text-left">{{ max_days}}</td>
                    </tr>
                </thead>
                <tbody>
                      {% if result_shipping %}
                      {% for result_shippings in result_shipping %}
                        <tr>
                          <td class="text-center">{% if result_shippings['selected'] %}
                            <input type="checkbox" name="selected[]" value="{{ result_shippings['id']}}" checked="checked" />
                            {% else %}
                            <input type="checkbox" name="selected[]" value="{{ result_shippings['id']}}" />
                            {% endif %}
                          </td>
                          <td class="text-left">{{  result_shippings['country']}}</td>
                          <td class="text-left" >{{ result_shippings['zip_from']}}</td>
                          <td class="text-left">{{ result_shippings['zip_to']}}</td>
                          <td class="text-left">{{  result_shippings['price']}}</td>
                          <td class="v">{{ result_shippings['weight_from']}}</td>
                          <td class="text-left">{{ result_shippings['weight_to']}}</td>
                          <td class="text-left">{{ result_shippings['max_days']}}</td>
                        </tr>
                      {% endif %}
                      {% else %}
                      <tr>
                        <td class="text-center" colspan="12">{{ no_records_found}}</td>
                      </tr>
                      {% endif %}
              </tbody>
            </table>
          </div>
        </form>
        <div class="text-right">{{ pagination}}</div>
        <div class="text-right">{{ results}}</div>
        {% else %}
          <div class="text-danger">
            {{ error_warning_authenticate}}
          </div>
        {% endif %}

{{ content_bottom}}</div>
{% else %}
  <h2 style='color:#F93D49;'>Please inform Admin</h2>
{% endif %}
{{ column_right}}</div>
</div>
</div>
{{ footer}}

<script type="text/javascript">
jQuery('input[name=up_file]').change(function(){
  csv_val = jQuery(this).val().split('.').pop();
    $('#input-csv-name').val(jQuery(this).val().replace(/C:\\fakepath\\/i, ''));
    if(csv_val!='csv'){
      jQuery('.csv-warning').addClass('text-danger').removeClass('hide');
    }else{
      jQuery('.csv-warning').addClass('hide').removeClass('text-danger');
    }
});

nextHtml = false;
prevHtml = $("<input type='text' class=\"form-control\"/>").attr({ name: 'separator' });
jQuery('.separator').click(function(){
  catchDiv = $(this).parent().next();
  nextHtml = catchDiv.html();
  catchDiv.html(prevHtml);
  prevHtml = nextHtml;
});

$('#form-delete').submit(function(){
    if ($(this).attr('action').indexOf('delete',1) != -1) {
        if (!confirm('{{ text_confirm}}')) {
            return false;
        }
    }
});

function filter() {

  url = 'index.php?route=account/customerpartner/add_shipping_mod';

  var filter_name = $('input[name=\'filter_name\']').val();

  if (filter_name) {
    url += '&filter_name=' + encodeURIComponent(filter_name);
  }

  var filter_country = $('input[name=\'filter_country\']').val();

  if (filter_country) {
    url += '&filter_country=' + encodeURIComponent(filter_country);
  }

  var filter_price = $('input[name=\'filter_price\']').val();

  if (filter_price) {
    url += '&filter_price=' + encodeURIComponent(filter_price);
  }

  var filter_zip_to = $('input[name=\'filter_zip_to\']').val();

  if (filter_zip_to) {
    url += '&filter_zip_to=' + encodeURIComponent(filter_zip_to);
  }

  var filter_zip_from = $('input[name=\'filter_zip_from\']').val();

  if (filter_zip_from) {
    url += '&filter_zip_from=' + encodeURIComponent(filter_zip_from);
  }

  var filter_weight_to = $('input[name=\'filter_weight_to\']').val();

  if (filter_weight_to) {
    url += '&filter_weight_to=' + encodeURIComponent(filter_weight_to);
  }

  var filter_weight_from = $('input[name=\'filter_weight_from\']').val();

  if (filter_weight_from) {
    url += '&filter_weight_from=' + encodeURIComponent(filter_weight_from);
  }

  location = url;
}
</script>
